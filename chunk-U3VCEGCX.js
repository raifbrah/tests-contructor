import{qa as O,ra as V}from"./chunk-IXWMK725.js";import{g as P,m as k,o as w,p as M,s as F,t as B}from"./chunk-MST2NH66.js";import{Ab as s,Ib as f,Mb as m,Nb as a,Sa as r,Xb as o,Yb as _,cc as b,fa as T,fc as h,gb as v,hc as y,la as d,ma as p,ub as x,vb as C,wb as g,xb as E,yb as S,zb as i}from"./chunk-PSAYHQT2.js";var $=()=>["test"],I=()=>({type:"create"}),A=(t,e)=>e.id;function q(t,e){t&1&&(i(0,"h2"),o(1,"\u041F\u0440\u043E\u0439\u0434\u0435\u043D\u043D\u044B\u0435 \u0442\u0435\u0441\u0442\u044B"),s())}function L(t,e){t&1&&(i(0,"h2"),o(1,"\u041C\u043E\u0438 \u0442\u0435\u0441\u0442\u044B"),s(),i(2,"a",3),o(3," \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0442\u0435\u0441\u0442 "),s()),t&2&&(r(2),S("routerLink",b(2,$))("queryParams",b(3,I)))}function z(t,e){t&1&&(i(0,"th"),o(1,"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F"),s(),i(2,"th"),o(3,"\u041A\u043E\u043B-\u0432\u043E \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432"),s())}function R(t,e){t&1&&(i(0,"th"),o(1,"\u0414\u0430\u0442\u0430 \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),s(),i(2,"th"),o(3,"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442"),s())}function j(t,e){if(t&1&&(i(0,"td"),o(1),h(2,"date"),s(),i(3,"td"),o(4),s()),t&2){let n=a().$implicit;r(),_(y(2,2,n.created_at,"dd.MM.yyyy")),r(3),_(n.participants.length)}}function N(t,e){if(t&1&&(i(0,"td"),o(1),h(2,"date"),s(),i(3,"td"),o(4),s()),t&2){let n=a().$implicit;r(),_(y(2,2,n.passed_at,"dd.MM.yyyy")),r(3),_(n.result)}}function U(t,e){if(t&1){let n=f();i(0,"button",5),m("click",function(){d(n);let l=a().$implicit,c=a();return p(c.watchTest(l))}),o(1," \u041E\u0442\u043A\u0440\u044B\u0442\u044C "),s(),i(2,"button",5),m("click",function(){d(n);let l=a().$implicit,c=a();return p(c.deletePassedTest(l))}),o(3," \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),s()}}function G(t,e){if(t&1){let n=f();i(0,"button",6),m("click",function(){d(n);let l=a().$implicit,c=a();return p(c.openTest(l))}),o(1," \u041F\u0440\u043E\u0439\u0442\u0438 "),s(),i(2,"button",6),m("click",function(){d(n);let l=a().$implicit,c=a();return p(c.editTest(l))}),o(3," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),s(),i(4,"button",5),m("click",function(){d(n);let l=a().$implicit,c=a();return p(c.deleteTest(l))}),o(5," \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),s()}}function H(t,e){if(t&1&&(i(0,"tr")(1,"td"),o(2),s(),x(3,j,5,5)(4,N,5,5),i(5,"td",4),x(6,U,4,0)(7,G,6,0),s()()),t&2){let n=e.$implicit,u=a();r(2),_(n.name),r(),C(u.testsType!=="passed-tests"?3:4),r(3),C(u.testsType==="passed-tests"?6:7)}}var D=class t{testsType="";authService=T(B);testsService=T(V);route=T(k);router=T(w);getTests(e){return e!=="completed"?this.testsService.testsList.filter(n=>n.author_id===this.authService.currentUser().id):this.testsService.completedTestsList.filter(n=>n.author_id===this.authService.currentUser().id)}ngOnInit(){this.testsType=this.route.snapshot.url.at(-1)?.path??""}editTest(e){this.router.navigate(["/test"],{queryParams:{id:e.id,type:"edit"}})}deleteTest(e){this.testsService.deleteTest(e.id)}deletePassedTest(e){this.testsService.deletePassedTest(e.id)}openTest(e){this.router.navigate(["/test"],{queryParams:{id:e.id,type:"passing"}})}watchTest(e){this.router.navigate(["/test"],{queryParams:{id:e.id,type:"watch"}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=v({type:t,selectors:[["tests-table"]],decls:16,vars:2,consts:[[1,"tests-header"],[1,"tests-table-container"],[1,"tests-table"],["tuiButton","","size","s","appearance","primary",1,"create-test-button",3,"routerLink","queryParams"],[1,"tests-table__actions"],["tuiButton","","size","s","appearance","primary",3,"click"],["tuiButton","","size","s","appearance","secondary",3,"click"]],template:function(n,u){n&1&&(i(0,"div",0),x(1,q,2,0,"h2")(2,L,4,4),s(),i(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th"),o(8,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),s(),x(9,z,4,0)(10,R,4,0),i(11,"th"),o(12,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"),s()()(),i(13,"tbody"),g(14,H,8,3,"tr",null,A),s()()()),n&2&&(r(),C(u.testsType==="passed-tests"?1:2),r(8),C(u.testsType!=="passed-tests"?9:10),r(5),E(u.testsType==="passed-tests"?u.getTests("completed"):u.getTests()))},dependencies:[O,F,M,P],styles:[".tests-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.tests-table[_ngcontent-%COMP%]{width:100%;background:#fff}.tests-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f3f4f6}.tests-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tests-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;font-size:14px}.tests-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f9fafb}.tests-table__actions[_ngcontent-%COMP%]{display:flex;gap:8px}.tests-table-container[_ngcontent-%COMP%]{overflow:auto;box-shadow:0 10px 30px #0f172a0f;border-radius:12px;border-collapse:collapse;margin-top:20px;background:#fff}"]})};export{D as a};
