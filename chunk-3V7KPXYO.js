import{a as J,b as $,c as tt,e as et,f as q,i as it,j as nt,k as I,m as S,q as D,s as at,v as E,y as ot}from"./chunk-YSSBW536.js";import{E as ct,F as rt,G as Q,i as X,u as Z,w as T,x as Y,y as L,z as A}from"./chunk-JJALO4G2.js";import{Aa as P,Ab as M,Ba as R,Ca as b,Da as o,Ea as s,H as y,Hb as U,Jb as G,K as k,Kb as K,M as l,Ma as _,N as m,Oa as h,Ob as st,Qa as c,R as z,a as W,bb as p,db as B,eb as v,fa as d,fb as x,gb as w,jb as V,kb as H,oa as f,pa as C,xa as F,ya as u,za as g}from"./chunk-C7AC74Z5.js";var lt=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=C({type:i});static \u0275inj=y({imports:[T]})}return i})();var mt=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=C({type:i});static \u0275inj=y({imports:[T]})}return i})();var dt=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=C({type:i});static \u0275inj=y({imports:[X,Y,mt,T,lt]})}return i})();var bt=(i,a,t)=>({"disabled-input-text":i,"right-answer":a,"wrong-answer":t});function ft(i,a){if(i&1){let t=_();o(0,"input",4),w("ngModelChange",function(n){l(t);let r=c(2);return x(r.answer.checked,n)||(r.answer.checked=n),m(n)}),h("change",function(){l(t);let n=c(2);return m(n.saveAnswer())}),s()}if(i&2){let t=c(2);v("ngModel",t.answer.checked),b("disabled",t.testType==="watch")}}function vt(i,a){if(i&1){let t=_();o(0,"input",5),w("ngModelChange",function(n){l(t);let r=c(2);return x(r.question.group_answer,n)||(r.question.group_answer=n),m(n)}),h("change",function(){l(t);let n=c(2);return m(n.saveAnswer())}),s()}if(i&2){let t=c(2);v("ngModel",t.question.group_answer),b("value",t.answer.id)("disabled",t.testType==="watch"),F("name",t.question.id)}}function xt(i,a){if(i&1&&u(0,ft,1,2,"input",2)(1,vt,1,4,"input",3),i&2){let t=c();g(t.question.type==="multiple"?0:1)}}function wt(i,a){if(i&1){let t=_();o(0,"button",6),h("click",function(){l(t);let n=c();return m(n.answer.correct=!n.answer.correct)}),p(1),s(),o(2,"button",6),h("click",function(){l(t);let n=c();return m(n.onRemoveAnswer())}),p(3,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),s()}if(i&2){let t=c();d(),B(" \u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439: ",t.answer.correct," ")}}var N=class i{answer;testType;question;removeAnswer=new z;testsService=k(Q);onRemoveAnswer(){this.removeAnswer.emit()}saveAnswer(){this.testsService.save()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=f({type:i,selectors:[["app-answer"]],inputs:{answer:"answer",testType:"testType",question:"question"},outputs:{removeAnswer:"removeAnswer"},decls:4,vars:9,consts:[[1,"answer"],["type","text","placeholder","\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",1,"answer__input",3,"ngModelChange","ngModel","disabled","ngClass"],["type","checkbox",1,"answer__checkbox",3,"ngModel","disabled"],["type","radio",1,"answer__checkbox",3,"ngModel","value","disabled"],["type","checkbox",1,"answer__checkbox",3,"ngModelChange","change","ngModel","disabled"],["type","radio",1,"answer__checkbox",3,"ngModelChange","change","ngModel","value","disabled"],["matButton","outlined",3,"click"]],template:function(t,e){t&1&&(o(0,"div",0),u(1,xt,2,1),o(2,"input",1),w("ngModelChange",function(r){return x(e.answer.value,r)||(e.answer.value=r),r}),s(),u(3,wt,4,1),s()),t&2&&(d(),g(e.testType==="passing"||e.testType==="watch"?1:-1),d(),v("ngModel",e.answer.value),b("disabled",e.testType==="passing"||e.testType==="watch")("ngClass",H(5,bt,e.testType==="passing"||e.testType==="watch",e.testType==="watch"&&e.answer.correct,e.testType==="watch"&&!e.answer.correct)),d(),g(e.testType!=="passing"&&e.testType!=="watch"?3:-1))},dependencies:[E,I,nt,at,S,D,A,L,M],styles:[".answer[_ngcontent-%COMP%]{display:flex;gap:.5rem}.answer__input[_ngcontent-%COMP%]{font-size:1rem}.right-answer[_ngcontent-%COMP%]{color:green}.wrong-answer[_ngcontent-%COMP%]{color:red}"]})};var kt=i=>({"disabled-input-text":i}),yt=(i,a)=>a.id;function Ct(i,a){i&1&&p(0," \u041E\u0434\u0438\u043D \u0432\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430 ")}function Mt(i,a){i&1&&p(0," \u041D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u043E\u0432 ")}function Tt(i,a){if(i&1){let t=_();o(0,"button",6),h("click",function(){l(t);let n=c();return m(n.changeQuestionType())}),u(1,Ct,1,0)(2,Mt,1,0),s()}if(i&2){let t=c();d(),g(t.question.type==="single"?1:t.question.type==="multiple"?2:-1)}}function Lt(i,a){if(i&1){let t=_();o(0,"app-answer",7),h("removeAnswer",function(){let n=l(t).$implicit,r=c();return m(r.removeAnswer(n.id))}),s()}if(i&2){let t=a.$implicit,e=c();b("testType",e.testType)("answer",t)("question",e.question)}}function At(i,a){if(i&1){let t=_();o(0,"div",5)(1,"button",8),h("click",function(){l(t);let n=c();return m(n.addNewAnswer())}),p(2," + \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C "),s(),o(3,"button",9),h("click",function(){l(t);let n=c();return m(n.onRemoveQuestion())}),p(4," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 "),s()()}}var j=class i{question;questionIndex;testType;removeQuestion=new z;onRemoveQuestion(){this.removeQuestion.emit()}removeAnswer(a){this.question.answers=this.question.answers.filter(t=>t.id!==a)}addNewAnswer(){this.question.answers=[...this.question.answers,{id:Date.now(),value:"",correct:!1,checked:!1}]}changeQuestionType(){this.question.type=this.question.type==="multiple"?"single":"multiple",this.question.answers.map(a=>a.checked=!1)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=f({type:i,selectors:[["app-question"]],inputs:{question:"question",questionIndex:"questionIndex",testType:"testType"},outputs:{removeQuestion:"removeQuestion"},decls:11,vars:8,consts:[[1,"card__header"],["type","text","placeholder","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u0430",1,"question__input",3,"ngModelChange","ngModel","disabled","ngClass"],["mat-stroked-button",""],[1,"questions"],[3,"testType","answer","question"],[1,"card-actions"],["mat-stroked-button","",3,"click"],[3,"removeAnswer","testType","answer","question"],["mat-stroked-button","",1,"task__add-option-btn",3,"click"],["matButton","filled",1,"error-button",3,"click"]],template:function(t,e){t&1&&(o(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title"),p(3),o(4,"input",1),w("ngModelChange",function(r){return x(e.question.description,r)||(e.question.description=r),r}),s()(),u(5,Tt,3,1,"button",2),s(),o(6,"mat-card-content")(7,"div",3),P(8,Lt,1,3,"app-answer",4,yt),s(),u(10,At,5,0,"div",5),s()()),t&2&&(d(3),B("",e.questionIndex+1,". "),d(),v("ngModel",e.question.description),b("disabled",e.testType==="passing"||e.testType==="watch")("ngClass",V(6,kt,e.testType==="passing"||e.testType==="watch")),d(),g(e.testType!=="passing"&&e.testType!=="watch"?5:-1),d(3),R(e.question.answers),d(2),g(e.testType!=="passing"&&e.testType!=="watch"?10:-1))},dependencies:[q,J,tt,et,$,A,L,N,E,I,S,D,M],styles:[".card__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.questions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1rem 0}.question__input[_ngcontent-%COMP%]{font-size:1.4rem}"]})};var It=i=>({"disabled-input-text":i}),St=(i,a)=>a.id;function Dt(i,a){if(i&1){let t=_();o(0,"app-question",7),h("removeQuestion",function(){let n=l(t).$implicit,r=c();return m(r.removeQuestion(n.id))}),s()}if(i&2){let t=a.$implicit,e=a.$index,n=c();b("question",t)("questionIndex",e)("testType",n.testType)}}function Et(i,a){if(i&1){let t=_();o(0,"button",8),h("click",function(){l(t);let n=c();return m(n.addNewQuestion())}),o(1,"mat-icon"),p(2,"add_circle"),s()()}}function Ot(i,a){if(i&1){let t=_();o(0,"a",9),p(1,"\u0412\u044B\u0439\u0442\u0438"),s(),o(2,"button",10),h("click",function(){l(t);let n=c();return m(n.completeTest())}),p(3,"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C"),s()}}function zt(i,a){i&1&&(o(0,"a",6),p(1,"\u0412\u044B\u0439\u0442\u0438"),s())}function Ft(i,a){if(i&1){let t=_();o(0,"a",9),p(1,"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C"),s(),o(2,"button",10),h("click",function(){l(t);let n=c();return m(n.saveTest())}),p(3,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),s()}}var ut=class i{testType="create";test;authService=k(st);testsService=k(Q);route=k(U);router=k(G);constructor(){this.route.queryParams.subscribe(a=>{let t=a.type;if(t&&(this.testType=t),t!=="create"){let e=Number(a.id),n=this.testsService.testsList.find(r=>r.id===e);n&&(this.test=W({},n))}else this.test={id:Date.now(),name:"Email adress",author_id:this.authService.currentUser().id,created_at:Date.now(),questions:[]}})}addNewQuestion(){this.test.questions=[...this.test.questions,{id:Date.now(),description:"",type:"multiple",group_answer:null,order:3,theUserAnsweredCorrectly:!1,answers:[]}]}removeQuestion(a){this.test.questions=this.test.questions.filter(t=>t.id!==a)}saveTest(){this.testsService.createNewTest(this.test),this.router.navigate([""])}completeTest(){this.testsService.completeTest(W({},this.test)),this.router.navigate(["passed-tests"])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=f({type:i,selectors:[["app-test"]],decls:10,vars:7,consts:[["type","text",1,"test-title",3,"ngModelChange","ngModel","disabled","ngClass"],[1,"test-container"],[1,"test-container__questions-list"],[3,"question","questionIndex","testType"],["mat-icon-button","",1,"add-card-btn"],[1,"test-container__actions"],["matButton","outlined","routerLink","/passed-tests"],[3,"removeQuestion","question","questionIndex","testType"],["mat-icon-button","",1,"add-card-btn",3,"click"],["matButton","outlined","routerLink",""],["matButton","filled",3,"click"]],template:function(t,e){t&1&&(o(0,"input",0),w("ngModelChange",function(r){return x(e.test.name,r)||(e.test.name=r),r}),s(),o(1,"div",1)(2,"div",2),P(3,Dt,1,3,"app-question",3,St),u(5,Et,3,0,"button",4),s(),o(6,"div",5),u(7,Ot,4,0)(8,zt,2,0,"a",6)(9,Ft,4,0),s()()),t&2&&(v("ngModel",e.test.name),b("disabled",e.testType==="passing"||e.testType==="watch")("ngClass",V(5,It,e.testType==="passing"||e.testType==="watch")),d(3),R(e.test.questions),d(2),g(e.testType!=="passing"&&e.testType!=="watch"?5:-1),d(2),g(e.testType==="passing"?7:e.testType==="watch"?8:9))},dependencies:[it,ot,A,L,Z,rt,ct,dt,q,E,I,S,D,j,K,M],styles:[".test-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;width:100%;font-size:2rem;font-weight:700}.test-container[_ngcontent-%COMP%]{gap:2rem;display:flex;flex-direction:column;border:1px solid #000;max-width:min(800px,100%);margin:0 auto;padding:2rem min(4rem,5%);border-radius:1rem}.test-container__questions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.test-container__actions[_ngcontent-%COMP%]{gap:.5rem;display:flex;margin:0 auto;width:min-content}.add-card-btn[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto;font-size:70px;width:70px;height:70px}.add-card-btn[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:absolute;font-size:inherit;width:inherit;height:inherit}"]})};export{ut as TestComponent};
